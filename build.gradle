apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'maven'

version = 1
group = 'de.gesellix'
archivesBaseName = 'gradle-debian-plugin'

repositories {
  mavenCentral()
}

configurations.all {
  resolutionStrategy {
    failOnVersionConflict()

    def dependencyVersions = [
        'org.codehaus.plexus:plexus-classworlds': '1.2-alpha-9',
        'org.codehaus.plexus:plexus-container-default': '1.0-alpha-30',
        'org.codehaus.plexus:plexus-interactivity-api': '1.0-alpha-6',
        'org.codehaus.plexus:plexus-utils': '1.5.15',
        'classworlds:classworlds': '1.1',
        'commons-httpclient:commons-httpclient': '3.1',
        'org.slf4j:slf4j-api': '1.5.6'
    ]

    force dependencyVersions.collect { k, v -> "$k:$v" }
  }
}

dependencies {
  compile gradleApi()
  compile localGroovy()

  compile 'org.vafer:jdeb:1.0.1'
}

test {
  useTestNG()
}

uploadArchives {
  repositories {
    mavenDeployer {
      repository(url: 'file:./lib')
    }
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = '1.7'
}
